<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="general_style.css" />
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dataviz</title>
  </head>
  <body>
    <header>
      <a href="course_list.html"><span>뒤로가기</span></a>
    </header>
    <h1>초보를 위한 데이터 시각화</h1>
    <div id="course1">
      <h2>#1 Save the Pandas</h2>
      <div id="course1-0" class="idv_class">
        <h3>1-0. Introduction to Pandas and Jupyter</h3>
        <ul>
          <li>Pandas는 기본적으로 CSV 파일을 다루기 위해 만들어짐.</li>
        </ul>
      </div>
      <div id="course1-1" class="idv_class">
        <h3>1-1. Getting Total Cases Globally</h3>
        <ul>
          <li>
            daily_df[["Confirmed", "Deaths", "Recovered"]].sum()
            <b><mark>.reset_index(name="count")</mark></b> -> 이렇게 하면
            series가 아니라 dataframe 형식을 유지함.
          </li>
          <li>
            칼럼 이름 바꾸기
            <ul>
              <li>
                daily_df = daily_df<b
                  ><mark>.rename(columns={"index":"condition"})</mark></b
                >
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <div id="course1-2" class="idv_class">
        <h3>1-2. Getting Total Cases by Country</h3>
        <ul>
          <li>
            daily_df = daily_df.groupby("Country_Region").sum()
            <ul>
              <li>
                뒤에 .reset_index() 붙여주면 index였던 Country가 칼럼이 됨
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <div id="course1-3" class="idv_class">
        <h3>1-3. Global Time Series Part One</h3>
        <ul>
          <li>
            Jupyter theme 변경하기
            <ol>
              <li>
                <code
                  ><b><mark>pip install jupyterthemes</mark></b></code
                >
              </li>
              <li>
                <code
                  ><b><mark>jt -t monokai</mark></b></code
                >
                : 니코쌤이랑 같은 검은 배경
              </li>
              <li>
                <u>Command(Ctrl)+C</u> : 실행중인 jupyter notebook을 kill (kill
                the server)
              </li>
            </ol>
            <ul>
              <li>
                cf.
                https://github.com/dunovank/jupyter-themes/blob/master/README.md
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <div id="course1-4" class="idv_class">
        <h3>1-4. Global Time Series Part Two</h3>
        <ul>
          <li>
            필요없는 column들 drop하기
            <ul>
              <li>ex. df.drop(['B','C'], axis=1)</li>
            </ul>
          </li>
          <li>
            merge
            <ul>
              <li>ex. df1.merge(df2)</li>
            </ul>
          </li>
        </ul>
      </div>
      <div id="course1-5" class="idv_class">
        <h3>1-5. Country Time Series part One</h3>
        <ul>
          <li>
            pandas.Dataframe<b><mark>.loc</mark></b
            >: access a group of rows and columns by labels or a boolean array
            <ul>
              <li>ex. df = df.loc[df["Country/Region"]=="Afghanistan"]</li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
    <div class="course2">
      <h2>#2 Dashboard</h2>
      <div id="course2-0" class="idv_class">
        <h3>2-0. Introduction to Dash</h3>
        <ul>
          <li>Dash: Python코드로 react application을 만들어줌</li>
          <li>
            https://dash.plotly.com/layout에서 코드 복붙, 실행하면 Dash is
            running on http://127.0.0.1:8050이 뜸 <br />Serving Falsk app "main"
            -> Dash는 flask 위에서 작동됨
          </li>
          <li>VS code에서 코드를 변경하면 dash에 바로 반영됨(!)</li>
        </ul>
      </div>
      <div id="course2-1" class="idv_class">
        <h3>2-1. Layouts in Dash</h3>
        <ul>
          <li>
            Dash의 멋진 2 concepts
            <ol>
              <li>Layout: puts HTML on the screen</li>
              <li>Callbacks : make everything interactive</li>
            </ol>
            <ul></ul>
          </li>
          <li>Dash의 레이아웃 위에 올라가는 것들은 모두 창에서 보여짐</li>
          <li>
            두 가지 옵션 사용 가능
            <ul>
              <li>
                app.layout = html.Div( #니꼬쌤의 preference
                <ul>
                  children=[
                  <ul>
                    html.H1()
                  </ul>
                  ]
                </ul>
                )
              </li>
              <li>
                app.layout = html.Div(
                <ul>
                  html.H1()
                </ul>
                )
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <div id="course2-2" class="idv_class">
        <h3>2-2. Countries Tables part One</h3>
      </div>
      <div id="course2-3" class="idv_class">
        <h3>2-3. Cleaning the Code</h3>
      </div>
      <div id="course2-4" class="idv_class">
        <h3>2-4. Introduction to Plotly</h3>
        <ul>
          <li>Plotly: 지도를 위해 사용하는 라이브러리</li>
          <li>
            Dash is made by Plotly
            <ul>
              <li>Dash는 Python 코드로 react application을 만들어 줌</li>
              <li>
                Plotly: Data Visualization을 할 수 있게 해줌.(오픈소스 graphing
                library) JS, R, python에서 사용 가능
              </li>
            </ul>
          </li>
          <li>
            <b>plotly express</b>: plotly 패키지의 일부. 만들어져 있는 지도를
            준비해 줌.
          </li>
        </ul>
      </div>
      <div id="course2-5" class="idv_class">
        <h3>2-5. Building the Map Figure</h3>
        <ul>
          <li>
            px.scatter_geo()로 간단하게 맵을 만들 수 있음.
            <ul>
              <li>
                ex. <b><mark>fig = px.scatter_geo</mark></b
                >(countries_df)<br /><b><mark>fig.show()</mark></b>
              </li>
              <li>
                <b><code>size="Confirmed"</code></b> #각 bubble의 사이즈를 정할
                칼럼 이름
              </li>
              <li>
                <b><code>size_max = 40</code></b> #max size 지정 (버블의
                사이즈가 너무 작아서 불만이면 이거 수정)
              </li>
              <li>
                <b><code>template = "plotly_dark"</code></b> #맵의 디자인 결정.
                ggplot2, seaborn, simple_white, plotly 등등 사용 가능
                <ul>
                  cf. plotly.com/python/templates/ 참고
                </ul>
              </li>
              <li>
                <b><code>locations = "Country_Region"</code></b
                >: 버블 표시의 기준이 될 칼럼?
              </li>
              <li>
                <b><code>locationmode = "country names"</code></b>
              </li>
              <li>
                <b><code>color = "Confirmed"</code></b
                >: 해당 칼럼 기준으로 버블 색이 변경됨
              </li>
              <li>
                <b><code>hover_name = "Country_Region"</code></b
                >: 마우스가 버블 위에 hover하면 해당 칼럼 정보가 뜸
              </li>
              <li>
                <b
                  ><code
                    >hover_data = {"Confirmed":":,",
                    "Country_Region":False}</code
                  ></b
                >: confirmed 숫자는 세 자리마다 칼럼이 찍혀서 나오고(1,000처럼),
                "Country_Region"정보는 숨겨짐
                <ul>
                  cf. string format 참고:
                  https://mkaz.blog/code/python-string-format-cookbook
                </ul>
              </li>
              <li>
                <b><code>projection</code></b
                >: 지도의 스타일을 바꿔줌. ex. equirectangular, merator, etc.
                <ul>
                  cf. plotly.com/python/map-configuration/#map-projections
                </ul>
              </li>
              <li>
                <b><code>tilte="Confirmed Cases by Country"</code></b
                >: 타이틀 추가
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <div id="course2-6" class="idv_class">
        <h3>2-6. Bars Figure</h3>
        <ul>
          <li>
            bar 그래프 만들기
            <ul>
              <code
                >fig = px.bar(totals_df, x="condition", y="count")<br />fig.show()</code
              >
            </ul>
          </li>
          <li>
            스타일 변경: <b>template</b>
            <ul>
              <code>
                fig = px.bar(totals_df, x="condition", y="count",
                <b>template="plotly_dark"</b>)</code
              >
            </ul>
          </li>
        </ul>
      </div>
      <div id="course2-7" class="idv_class">
        <h3>2-7. Bars Figure part Two</h3>
        <ul>
          <li>
            scatter_geo 색상 바꾸기 -> built-in continuous color scales in
            python 확인
            <ul>
              <li>
                <b
                  ><code
                    >color_continuous_scale=px.colors.sequential.Oryel,</code
                  ></b
                >
              </li>
              <li>cf. plotly.com/python/builtin-colorscales/</li>
              <li>cf. 니꼬썜은 항상 Oryel을 씀.</li>
              <li>ex. Plotly3, Viridis, Cividis, Inferno, Magma, etc.</li>
            </ul>
          </li>
          <li>
            layout 변경하기
            <ul>
              <li>
                ex.(bar 그래프)<br />fig<b>.update_layout</b>(
                <ul>
                  xaxis=dict(title="Condition")<br />yaxis=dict(title="Count")
                </ul>
                ) <br />cf. px.bar()안에 labels={"condition":"Condition"}처럼
                넣어도 됨.
              </li>
              <li>
                ex. (scatter_geo에서 margin 설정. 지도의 크기가 커짐)<br />fig<b>.update_layout</b>(
                <ul>
                  margin=dict(l=0, r=0, t=50, b=0)
                </ul>
                )
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <div id="course2-8" class="idv_class">
        <h3>2-8. Styles and Colors</h3>
        <ul>
          <li>
            bar그래프에서 각 column의 색을 다르게 표시하기
            <ul>
              <li>
                px.bar()안에,
                <code>color=["Confirmed", "Deaths", "Recovered"]</code>
              </li>
            </ul>
          </li>
          <li>flatuicolors.com/palette/defo : 유용한 사이트. 색상 가져오기</li>
          <li>
            <b>update_traces</b>: bar graph의 색깔을 내가 원하는 대로 변경
            <ul>
              <li>
                <code
                  >bars_graph<b>.update_traces</b>(marker_color=["#e74c3c",
                  "#8e44ad", "#27ae60"])</code
                >
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
    <div class="course3">
      <h2>#3 Interactivity</h2>
      <div id="course3-0" class="idv_class">
        <h3>3-0. Introduction to Callbacks</h3>
        <ul>
          <li>
            <b>Dash</b>
            <ul>
              <li>HTML components</li>
              <li>
                Core components : make the dashboard interactive
                <ul>
                  <li>generate react.js code</li>
                </ul>
              </li>
            </ul>
          </li>
          <li><b>callback</b> takes 2 things; output & input</li>
          <li>
            <code
              >from dash.dependencies import Input, Output<br /><br />html.Div(
              <ul>
                children=[
                <ul>
                  dcc.Input(id="hello-input"),<br />html.H2(children="Hello",
                  id="hello-output")
                </ul>
                ]
              </ul>
              )<br /><br />@app.<b>callback</b>(Output("hello-output",
              "children"), [Input("hello-input", "value")])<br />def
              update_hello(value):
              <ul>
                if value is None:
                <ul>
                  return "Hello Anonymous"
                </ul>
                else:
                <ul>
                  return f"Hello {value}"
                </ul>
              </ul></code
            >
          </li>
        </ul>
      </div>
      <div id="course3-1" class="idv_class">
        <h3>3-1. Recap and Dropdown</h3>
      </div>
      <div id="course3-2" class="idv_class">
        <h3>3-2. Countries Dropdown and Graph part One</h3>
      </div>
      <div id="course3-3" class="idv_class">
        <h3>3-3. Countries Graph part Two</h3>
        <ul>
          <li>
            Plotly : 그래프의 많은 부분에 손을 대고 싶다면(ex. 선 위에 점 찍기
            등)
            <ul>
              ex.
              <code
                >import <b>plotly.graph_objects as go</b><br />import numpy as
                np<br /><br />x = np.arange(10)<br />fig =
                <b>go.Figure</b>(data=go.Scatter(x=x, y=x**2))<br />fig=show()</code
              >
            </ul>
          </li>
          <li>Plotly express</li>
          <li>
            line 그래프에서 각 line의 색 변경
            <ul>
              <li>
                ex.
                <code
                  >fig = px.line(df, x="date", y=["confirmed", "deaths",
                  "recovered"])<br />fig["data"][0]["line"]["color"] = "red"<br />fig["data"][1]["line"]["color"]
                  = "pink"<br />...</code
                >
              </li>
              <li>
                ex.
                <code
                  >fig = px.line(df, x="date", y=["confirmed", "deaths",
                  "recovered"],
                  <b>color_discrete_map</b>
                  = {"confirmed":"red", "deaths":"pink", "recovered":"green"}
                  )</code
                >
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <div id="course3-4" class="idv_class">
        <h3>3-4. Updating the Graph</h3>
      </div>
      <div id="course3-5" class="idv_class">
        <h3>3-5. Conclusions</h3>
      </div>
      <div id="course3-6" class="idv_class">
        <h3>3-6. Bonus Deploying to Heroku</h3>
        <ul>
          <li>
            <b>Heroku</b>: Python이나 node.js 어플리케이션을 deploy할 수 있는 곳
            <ul>
              <li>AWS보다 비쌈</li>
              <li>아시아 지역이 없음;</li>
              <li>but 정말 빠르게 deploy할 수 있음. in less than 5 mins</li>
              <li>
                <b>Heroku CLI</b>: 콘솔에서 Heroku랑 communicate할 수 있게 해줌.
              </li>
            </ul>
          </li>

          <li>
            <b><code>pip freeze > requirements.txt</code></b> : import해야하는
            패키지들 목록을 담은 텍스트 파일을 만들어줌. Heroku에 deploy하기
            전에 필요한 것만 남기고 다 지웁시다.
          </li>
          <li>
            <b>procfile</b>: 어떤 종류의 어플리케이션을 deploy하는지 heroku에게
            정보를 줌
          </li>
          <li>
            <b>gunicorn</b>: 파이썬을 위한 진짜 서버
            <ul>
              <li>
                강력하고 동시에 많은 사람들이 접속 가능. 일반 dash 서버를
                사용하면 안돼요
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </body>
</html>
